这是一个项目构思与技术架构的阶段性总结文档。设计目标是\*\*“填补 AI 生成游戏原型与多人实机游玩之间的最后一公里”\*\*。

此文档旨在帮助团队成员快速理解产品愿景、核心逻辑及 MVP（最小可行性产品）的开发路线。

# ---

**项目文档：通用 AI 游戏容器平台 (Universal AI Game Container)**

## **1\. 项目愿景 (Vision)**

打造一个**去中心化**的派对游戏平台。允许用户利用 AI 快速生成游戏代码，并通过 Docker 私有化部署，让周围的朋友仅通过一个通用的手机 App 即可扫码/输入密码加入游戏。

* **核心理念：** 手机是通用的浏览器壳（Client），服务器是用户自托管的逻辑中心（Host），平台仅做撮合（Matchmaker）。  
* **目标场景：** 20人以内的线下/线上派对、AI 游戏原型的快速分享与测试。

## ---

**2\. 核心价值与独创性 (Value Proposition)**

| 维度 | 现状与痛点 | 我们的解决方案 |
| :---- | :---- | :---- |
| **开发门槛** | AI 写代码容易，但配置编译环境、打包 APK/IPA 发给朋友安装极难。 | **零编译**。代码放入 Docker 跑起来，朋友手机直接动态加载网页。 |
| **服务器** | Roblox 等平台强制使用官方服务器，逻辑受限，数据不归属用户。 | **BYO (Bring Your Own) Server**。支持 Python/Node/C++ 任意后端，完全私有化。 |
| **客户端** | 每个新游戏都需要下载一个新的 App。 | **One App, Infinite Games**。一个通用壳，即用即走。 |

## ---

**3\. 系统架构设计 (System Architecture)**

系统由三个松耦合的部分组成。

### **3.1 角色定义**

1. **摊主 (Game Server \- Docker)**  
   * **定义：** 用户利用 AI 生成的游戏服务端。  
   * **职责：** 托管游戏逻辑、提供 HTML5 前端页面、向撮合平台发送心跳包（汇报 IP/端口）。  
   * **技术栈：** 推荐 Node.js \+ Socket.io (兼容性最好，AI 最擅长)。  
2. **大喇叭 (Matchmaker \- Discovery Service)**  
   * **定义：** 平台方维护的中心化轻量服务。  
   * **职责：** 维护一份动态的“活跃房间列表”。不处理游戏业务逻辑，不转发游戏流量。  
   * **机制：** 接收服务端的心跳注册，供客户端查询。若心跳超时则移除。  
3. **游客 (Universal Client \- Mobile App)**  
   * **定义：** 玩家手机上的通用 App。  
   * **职责：** 浏览房间列表 \-\> 建立 WebSocket 连接 \-\> 通过 WebView 全屏渲染游戏。  
   * **技术栈：** Flutter / React Native \+ WebView (System WebKit)。

### **3.2 架构交互图 (Mermaid)**

Code snippet

graph TD  
    subgraph "用户自托管环境 (Docker)"  
    GameServer\[游戏容器 (Node.js)\]  
    end

    subgraph "平台服务 (Cloud)"  
    Matchmaker\[撮合服务 (Registry)\]  
    end

    subgraph "玩家终端 (Mobile)"  
    ClientApp\[通用 App (WebView)\]  
    end

    %% 流程连线  
    GameServer \-- "1. 心跳注册 (POST IP:Port)" \--\> Matchmaker  
    ClientApp \-- "2. 获取房间列表 (GET)" \--\> Matchmaker  
    Matchmaker \-- "3. 返回目标 IP" \--\> ClientApp  
    ClientApp \== "4. P2P 直连 (WebSocket/HTML)" \==\> GameServer

## ---

**4\. MVP (最小可行性产品) 实施方案**

为了验证“AI 生成 \-\> 部署 \-\> 手机畅玩”的链路，MVP 阶段不涉及复杂功能（如支付、好友系统）。

### **4.1 标准化规范 (The Protocol)**

任何 AI 生成的游戏必须遵循此目录结构和行为：

* **文件结构：**  
  * server.js (监听 8080 端口，包含 Socket.io 逻辑)  
  * /public/index.html (游戏前端)  
  * manifest.json (游戏名、封面图)  
* **通信要求：** 容器启动时，必须自动 POST 自身 IP 到撮合服务地址。

### **4.2 技术栈选型**

* **服务端模板：** Node.js \+ Express \+ Socket.io  
  * *理由：* AI 生成此类代码的成功率最高，调试最容易。  
* **撮合服务：** Python (FastAPI) 或 Go (Gin) \+ 内存存储  
  * *理由：* 高并发处理心跳，开发极快。  
* **客户端：** Flutter  
  * *理由：* 跨平台性能好，WebView 控制力强。

### **4.3 验证流程 (User Journey)**

1. **Prompt:** 用户对 ChatGPT 说：“写一个基于 Node.js 的多人点击计数游戏，遵守\[平台规范\]。”  
2. **Deploy:** 用户将 AI 给的代码放入文件夹，运行 docker compose up。  
3. **Play:** 朋友打开手机 App，看到房间，点击加入，屏幕上出现按钮，大家一起点，数字实时跳动。

## ---

**5\. 潜在挑战与对策 (Risk & Mitigation)**

1. **网络连接 (NAT/防火墙):**  
   * *问题：* 家庭宽带通常没有公网 IP，外网朋友连不上。  
   * *对策：*  
     * MVP 阶段：仅支持同一 WiFi 下游玩（局域网模式）。  
     * V2 阶段：集成 FRP/Ngrok 隧道，或支持云服务器 IP 直连。  
2. **iOS/Android 审核:**  
   * *问题：* 商店禁止 App 下载并执行二进制代码。  
   * *对策：* 我们本质是浏览器，只加载 HTML/JS 资源，符合“远程桌面/浏览器”类应用的审核规范。  
3. **安全问题:**  
   * *问题：* 恶意游戏代码。  
   * *对策：* Docker 容器天然隔离，不影响宿主机安全；App 端限制 WebView 的本地文件访问权限。

## ---

**6\. 下一步行动计划 (Action Items)**

1. **制定标准 (Protocol):** 编写一份 server.js 的“骨架代码”，包含心跳上报逻辑，供后续发给 AI 使用。  
2. **后端开发:** 用 Python 写一个最简单的 HTTP Server，只接收 {ip, port, name} 并存储。  
3. **前端开发:** 用 Flutter 写一个列表页 \+ WebView 页的 Demo。

---

文档版本：v0.1 (MVP 规划)  
生成日期：2025-12-08